package com.golden.website.dao;

import com.golden.website.dataobject.WebsiteUser;
import org.apache.ibatis.annotations.*;

import java.util.List;
@Mapper
public interface WebsiteUserMapper {
    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table website_user
     *
     * @mbg.generated
     */
    @Delete("delete from website_user where id =#{id}")
    int deleteByPrimaryKey(String id);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table website_user
     *
     * @mbg.generated
     */
    @Insert("insert into website_user (id,loginUserName, state, errorCount, registerTime, sex, name  )values (#{id},#{loginusername}, #{state}, #{errorcount},#{registertime}, #{sex}, #{name})")
    int insert(WebsiteUser record);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table website_user
     *
     * @mbg.generated
     */
    @Select("SELECT * FROM WEBSITE_USER WHERE ID =#{id}")
    WebsiteUser selectByPrimaryKey(String id);

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table website_user
     *
     * @mbg.generated
     */
    @Select("select a.id,a.loginusername,a.name,a.registerTime,b.enumvalue as sexenumvalue,c.enumvalue as stateenumvalue from website_user a left join website_enum b on a.sex = b.enumkey left join website_enum c on a.state = c.enumkey where b.type = 5 and c.type = 4 order by registertime desc")
    List<WebsiteUser> selectAll();

    /**
     * This method was generated by MyBatis Generator.
     * This method corresponds to the database table website_user
     *
     * @mbg.generated
     */
    @Update("update website_user set sex=#{sex},state=#{state} where id = #{id}")
    int updateByPrimaryKey(WebsiteUser record);
    @Select("select loginusername from WEBSITE_USER  where loginusername = #{loginusername}")
    List<WebsiteUser> checkLoginusername(String loginusername);

    @Select("select a.loginUserName ,a.errorCount,a.state  from WEBSITE_USER a  left join website_pwd b on a.id = b.id where a.loginUserName = #{loginusername} and b.passWord = #{password}")
    WebsiteUser checkLoginusernameAndPassword(WebsiteUser record);

    @Select("select * from WEBSITE_USER where loginUserName = #{loginusername}")
    WebsiteUser selectByLoginUserName(String loginusername);

    @Update("update WEBSITE_USER set errorCount = (errorCount + 1) where loginusername = #{loginusername}")
    int updateByLoginUsername_errorCount(String loginusername);

    @Update("update WEBSITE_USER set state = (state + 1) where loginusername = #{loginusername}")
    int updateByLoginUsername_State(String loginusername);
}